import{d as b,r as y,a as j,o as w,u as D,c as S,g as f,b as t,e as s,t as d,F as v,f as p,j as N,h as R,i as a,k as V,_ as B}from"./index-CEvehEJV.js";const C=(h,n,m,l)=>{const k=h.filter(r=>r>=n&&r<=m);k.length<l&&(l=0);const I=k.sort((r,i)=>r-i)[l],g=[];for(let r=0;r<h.length;r++)h[r]===I&&g.push(r);return g},F={class:"container"},x={class:"header"},E={key:1},J=["onInput"],O=["value"],$=["value","onInput"],G=b({__name:"ShowResultView",setup(h){const n=y(0),m=y(0),l=y(j),k=R();w(()=>{const i=D();n.value=parseInt(i.params.id),m.value=parseInt(localStorage.getItem("gameId"))||0,l.value=JSON.parse(localStorage.getItem(`gameData${m.value}`)||"{}")});const I=S(()=>f.rounds[n.value]),g=S(()=>{const i=l.value.rounds[n.value].bids,u=[];for(let e=0;e<i[0].length;e++){const o=i.map(_=>_[e]),c=C(o,f.projects[n.value][e].min,f.projects[n.value][e].max,f.projects[n.value][e].winning);u.push(c)}return u}),r=()=>{g.value.forEach((i,u)=>{i.length===1&&(l.value.rounds[n.value].successful_bidders[u]=i[0])}),localStorage.setItem(`gameData${m.value}`,JSON.stringify(l.value)),k.push({name:"home"})};return(i,u)=>(a(),t("div",F,[s("div",x,[s("h1",null,d(I.value),1),s("a",{onClick:r,class:"button-link"},"完了")]),s("table",null,[s("tr",null,[u[0]||(u[0]=s("th",null,"会社",-1)),(a(!0),t(v,null,p(N(f).projects[n.value],(e,o)=>(a(),t("th",{key:o},d(e.name),1))),128))]),(a(!0),t(v,null,p(l.value.companies,(e,o)=>(a(),t("tr",{key:o},[s("td",null,d(e),1),(a(!0),t(v,null,p(l.value.rounds[n.value].bids[o],(c,_)=>(a(),t("td",{key:_},d(c),1))),128))]))),128)),s("tr",null,[u[2]||(u[2]=s("td",null,"落札した会社",-1)),(a(!0),t(v,null,p(g.value,(e,o)=>(a(),t("td",{key:o},[e.length==0?(a(),t(v,{key:0},[V(" なし ")],64)):e.length==1?(a(),t("span",E,d(l.value.companies[e[0]]),1)):(a(),t("select",{key:2,onInput:c=>{console.log(c.target.value),l.value.rounds[n.value].successful_bidders[o]=parseInt(c.target.value)}},[u[1]||(u[1]=s("option",{value:-1},"選択してください",-1)),(a(!0),t(v,null,p(e,(c,_)=>(a(),t("option",{key:_,value:c},d(l.value.companies[c]),9,O))),128))],40,J))]))),128))]),s("tr",null,[u[3]||(u[3]=s("td",null,"コスト変動",-1)),(a(!0),t(v,null,p(l.value.rounds[n.value].costs,(e,o)=>(a(),t("td",{key:o},[s("input",{type:"number",value:e,onInput:c=>l.value.rounds[n.value].costs[o]=parseFloat(c.target.value)},null,40,$)]))),128))])])]))}}),M=B(G,[["__scopeId","data-v-43170b73"]]);export{M as default};
